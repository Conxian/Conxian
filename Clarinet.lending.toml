# Enhanced Lending System Deployment Plan
# Complete deployment configuration for all new lending contracts

name = "enhanced-lending-system"
network = "simnet"
stacks-api = "http://localhost:3999"

[contracts.math-lib-advanced]
path = "contracts/math-lib-advanced.clar"
depends_on = []

[contracts.fixed-point-math]
path = "contracts/fixed-point-math.clar"
depends_on = ["math-lib-advanced"]

[contracts.precision-calculator]
path = "contracts/precision-calculator.clar"
depends_on = ["math-lib-advanced", "fixed-point-math"]

[contracts.flash-loan-receiver-trait]
path = "contracts/flash-loan-receiver-trait.clar"
depends_on = []

[contracts.lending-system-trait]
path = "contracts/lending-system-trait.clar"
depends_on = ["flash-loan-receiver-trait"]

[contracts.interest-rate-model]
path = "contracts/interest-rate-model.clar"
depends_on = ["fixed-point-math"]

[contracts.comprehensive-lending-system]
path = "contracts/comprehensive-lending-system.clar"
depends_on = [
    "math-lib-advanced",
    "fixed-point-math", 
    "interest-rate-model",
    "lending-system-trait"
]

[contracts.enhanced-flash-loan-vault]
path = "contracts/enhanced-flash-loan-vault.clar"
depends_on = [
    "math-lib-advanced",
    "fixed-point-math",
    "flash-loan-receiver-trait"
]

[contracts.loan-liquidation-manager]
path = "contracts/loan-liquidation-manager.clar"
depends_on = [
    "comprehensive-lending-system",
    "fixed-point-math"
]

[contracts.lending-protocol-governance]
path = "contracts/lending-protocol-governance.clar"
depends_on = [
    "comprehensive-lending-system",
    "loan-liquidation-manager"
]

# Existing core contracts that integrate with the new system
[contracts.vault]
path = "contracts/vault.clar"
depends_on = ["enhanced-flash-loan-vault", "comprehensive-lending-system"]

[contracts.dex-router]
path = "contracts/dex-router.clar"
depends_on = ["math-lib-advanced", "fixed-point-math"]

[contracts.cxd-token]
path = "contracts/cxd-token.clar"

[contracts.cxs-token]  
path = "contracts/cxs-token.clar"

# Integration with existing tokenomics
[contracts.token-system-coordinator]
path = "contracts/token-system-coordinator.clar"
depends_on = [
    "comprehensive-lending-system",
    "lending-protocol-governance",
    "cxd-token",
    "cxs-token"
]

# Boot sequence for deployment
[[boot]]
depends_on = ["math-lib-advanced"]

[[boot]]
depends_on = ["fixed-point-math"]

[[boot]]
depends_on = ["precision-calculator"]

[[boot]]
depends_on = ["flash-loan-receiver-trait"]

[[boot]]
depends_on = ["lending-system-trait"]

[[boot]]
depends_on = ["interest-rate-model"]

[[boot]]
depends_on = ["comprehensive-lending-system"]

[[boot]]
depends_on = ["enhanced-flash-loan-vault"]

[[boot]]
depends_on = ["loan-liquidation-manager"]

[[boot]]
depends_on = ["lending-protocol-governance"]
