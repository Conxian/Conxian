---
id: 0
name: "Enhanced Tokenomics Deployment Plan - Breaking Circular Dependencies"
network: simnet
genesis:
  wallets:
    - name: deployer
      address: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
      balance: "100000000000000"
      sbtc-balance: "1000000000"
    - name: wallet_1
      address: ST1SJ3DTE5DN7X54YDH5D64R3BCB6A2AG2ZQ8YPD5
      balance: "100000000000000"
      sbtc-balance: "1000000000"
    - name: wallet_2
      address: ST2CY5V39NHDPWSXMW9QDT3HC3GD6Q6XX4CFRK9AG
      balance: "100000000000000"
      sbtc-balance: "1000000000"
  contracts:
    - costs
    - pox
    - pox-2
    - pox-3
    - pox-4
    - lockup
    - costs-2
    - costs-3
    - cost-voting
    - bns
plan:
  batches:
    - id: 0
      transactions:
        # Stage 1: Deploy traits first
        - emulated-contract-publish:
            contract-name: sip-010-trait
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/traits/sip-010-trait.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: staking-trait
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/traits/staking-trait.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: ft-mintable-trait
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/traits/ft-mintable-trait.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: sip-009-trait
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/traits/sip-009-trait.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: monitor-trait
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/traits/monitor-trait.clar
            clarity-version: 2
      epoch: "2.4"
    - id: 1
      transactions:
        # Stage 2: Deploy basic tokens first (no dependencies)
        - emulated-contract-publish:
            contract-name: cxlp-token
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/cxlp-token.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: cxs-token
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/cxs-token.clar
            clarity-version: 2
      epoch: "2.4"
    - id: 2
      transactions:
        # Stage 3: Deploy cxd-token first (needed by cxd-staking)
        - emulated-contract-publish:
            contract-name: cxd-token
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/cxd-token.clar
            clarity-version: 2
      epoch: "2.4"
    - id: 3
      transactions:
        # Stage 4: Deploy cxd-staking after cxd-token exists
        - emulated-contract-publish:
            contract-name: cxd-staking
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/cxd-staking.clar
            clarity-version: 2
      epoch: "2.4"
    - id: 4
      transactions:
        # Stage 5: Deploy independent enhanced contracts (no circular dependencies)
        - emulated-contract-publish:
            contract-name: protocol-invariant-monitor
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/protocol-invariant-monitor.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: token-emission-controller
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/token-emission-controller.clar
            clarity-version: 2
        - emulated-contract-publish:
            contract-name: revenue-distributor
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/revenue-distributor.clar
            clarity-version: 2
      epoch: "2.4"
    - id: 5
      transactions:
        # Stage 6: Deploy token-system-coordinator last (references all others)
        - emulated-contract-publish:
            contract-name: token-system-coordinator
            emulated-sender: ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM
            path: contracts/token-system-coordinator.clar
            clarity-version: 2
      epoch: "2.4"
