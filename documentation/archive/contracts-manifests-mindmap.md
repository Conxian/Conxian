# Contracts ↔ Clarinet Manifests Mindmap

This file maps contract files to Clarinet manifest keys and trait dependencies. It's auto-generated by the canonicalization script run during the audit.

## Legend
- (trait) — trait file under `contracts/traits/`
- .manifest-key — key used in Clarinet TOML manifests

## Contracts and Traits

- contracts/dex/revenue-distributor.clar
  - manifest keys: `revenue-distributor` (present in `Clarinet.simple.toml`, `Clarinet.enhanced.toml`, `Clarinet.test.toml`)
  - traits: `sip-010-trait` (.sip-010-trait) — used as `ft-trait`
  - traits: `staking-trait` (.staking-trait) — used as `staking-ref`

- contracts/dex/vault.clar
  - manifest keys: `vault` (check manifests)
  - traits: `vault-trait` (.vault-trait)
  - traits: `vault-admin-trait` (.vault-admin-trait)
  - traits: `sip-010-trait` (.sip-010-trait) — used as `sip10`
  - traits: `strategy-trait` (.strategy-trait)

- contracts/dex/loan-liquidation-manager.clar
  - manifest keys: `loan-liquidation-manager` (Clarinet.lending.toml)
  - traits: `liquidation-trait` (.liquidation-trait)

- contracts/lib/fixed-point-math.clar
  - manifest keys: `fixed-point-math` (Clarinet.toml -> contracts.lib)
  - notes: contains interdependent sqrt functions that need refactor

- contracts/traits/*
  - canonical trait files (access-control-trait, sip-010-trait, vault-trait, etc.)

## Unlinked / Check
- Tests reference trait principals using quoted principals (e.g., `traits.sip-010-trait.sip-010-trait`) — normalize to leading-dot form.
- Some docs contain use-trait examples that are syntactically incorrect; they are documentation only.

## Next steps
1. Finish batch B canonicalization across sBTC and dex contracts.
2. Remove all in-file `define-trait` duplicates and ensure every implementation uses `(use-trait <alias> .<manifest-key>)` followed by `(impl-trait <alias>)`.
3. Re-run `clarinet check` and iterate on remaining errors.
